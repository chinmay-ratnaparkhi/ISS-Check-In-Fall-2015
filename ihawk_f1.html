<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Chinmay Ratnaparkhi</title>

    <link href="css/bootstrap.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
<script>

var frame_loads=0;
var log_failed=0;
upload_flag=0;

function checkAndSet(){
	frame_loads++;
	
	
	if(frame_loads==1){
		if(log_failed==0){
			$('#welcome_log').modal('show');
		}
	}
	
	
	if(frame_loads==2){
		setTimeout(
			function(){
				$('#log_alright').modal('show');
			},500);
	}
	
	if(frame_loads==3){
		upload_passport();
	}
	if(frame_loads>3){
		upload_I20();
	}

}


function login_failed(){
	
		document.getElementById('log_in_again').innerHTML='<center><div id="log_try_again" class="alert alert-danger"><p class="lead">Let us try again!</p></div></center>';
		log_failed++;
		setTimeout(function(){
						$('#log_try_again').remove();
						frame_loads=0;
						document.getElementById('stage_area').src='https://ihawk.ku.edu/istart/controllers/client/kansas-login.html?CFID=19028&CFTOKEN=790fa9ded849cd10-DCB78989-E03D-FEFF-1A70A51F51359B22';
						$('#log_alright').modal('hide');
						document.getElementById('log_in_again').innerHTML='<center><button type="button" class="btn btn-success" data-dismiss="modal" onClick="upload_passport();">Yes</button><button type="button" class="btn btn-danger" data-dismiss="modal" onClick="login_failed();">&nbsp;No&nbsp;</button></center>';
					},1000);
}

function upload_passport(){
	if(upload_flag==0)
	{
		upload_flag=1;
		document.getElementById('stage_area').src='https://ihawk.ku.edu/istart/controllers/client/ClientEngine.cfm?serviceid=EFormPassportInformation1ServiceProvider&index=120483&eformGroup=18&selectedEFormGroup=1791';
		//fram_loads becomes 3.
	}else{
		frame_loads--;
		upload_flag=0;
		$('#instruct_passport').modal('show');
	}
}

function print_passport(){

	var print_station = document.getElementById('instruction_log');
	print_station.innerHTML='<div id="passport_note" class="alert alert-danger"><p class="lead"><span class="glyphicon glyphicon-exclamation-sign"></span>&nbsp;Scroll Down, enter information, choose file and click "Submit"</p></div>';
}


function upload_I20(){
	window.location="i20upload.html";
		//fram_loads becomes 4.
}
</script>		
</head>
	
<body>
<!--- ==================================================================================================================================================================== -->
<!-- Modal Welcome-->
<div class="modal fade" id="welcome_log" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
		<div class="modal-body">
		   <h1>Log In</h1>
		   <hr>
			<p class="lead">Please log in using your KU Online ID and Password.</p>
			<p>Your KU Online ID is a combination of 2 letters and 6 digits. For example : <strong>a123z456</strong>.</p>
		</div>
		<div class="modal-footer">
		<center>
        <button type="button" class="btn btn-success" data-dismiss="modal">Alright</button>
		</center>
	  </div>
	  </div>
    </div>
  </div>
</div>
<!----- ==================================================================================================================================================================== --->
<!-- Dialog Log Okay?-->
<div class="modal fade" id="log_alright" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
		<div class="modal-body">
		   <h1>Log In</h1>
		   <hr>
			<p class="lead">Were you able to log in successfully?</p>
		</div>
		<div class="modal-footer" id="log_in_again">
		<center>
			<button type="button" class="btn btn-success" data-dismiss="modal" onClick="upload_passport();">Yes</button>
			<button type="button" class="btn btn-danger" data-dismiss="modal" onClick="login_failed();">&nbsp;No&nbsp;</button>
		</center>
	  </div>
	  </div>
    </div>
  </div>
</div>
<!--- ====================================================================================================================================================================
<! Passport Upload Instructions -->
<div class="modal fade" id="instruct_passport" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
		<div class="modal-body">
		   <h1>Upload Passport</h1>
		   <hr>
		   <div class="alert alert-info"><p class="lead">Scroll Down the bottom of the page.</p></div>
		   <div class="alert alert-info"><p class="lead">Fill out information such as first name, surname etc.</p></div>
		   <div class="alert alert-info"><p class="lead">Click "Choose File", find your passport and Click "Submit"</p></div>
		</div>
		<div class="modal-footer">
		<center>
			<button type="button" class="btn btn-success" data-dismiss="modal" onClick="print_passport();">Okay</button>
		</center>
	  </div>
	  </div>
    </div>
  </div>
</div>
<!--=====================================================================================================================================-->
	<div class="container">
		<p>&nbsp;</p>
		<div class="row">
			<div class="col-xs-1">
			</div>
			<div class="col-xs-10" id="instruction_log"></div>
			<div class="col-xs-1"></div>
		</div>
		<center><iframe id= "stage_area" src="https://ihawk.ku.edu/istart/controllers/client/kansas-login.html?CFID=19028&CFTOKEN=790fa9ded849cd10-DCB78989-E03D-FEFF-1A70A51F51359B22" width="100%" height="600" onLoad="checkAndSet();"></iframe></center>
	</div>
</body>	
</html>